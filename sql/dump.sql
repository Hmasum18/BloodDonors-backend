/*
 Created by Ashfaq Rahman and Hasan Masum

 Source Server         : bms_project
 Source Server Type    : Oracle
 Source Server Version : 190000
 Source Host           : localhost:1521
 Source Schema         : C##BMS_PROJECT

 Target Server Type    : Oracle
 Target Server Version : 190000
 File Encoding         : 65001

 Date: 24/02/2022 12:13:31
*/


-- ----------------------------
-- Table structure for ACTION_TYPE
-- ----------------------------

CREATE TABLE "C##BMS_PROJECT"."ACTION_TYPE" (
  "ID" NUMBER(2,0) VISIBLE NOT NULL,
  "ENTITY" VARCHAR2(50 BYTE) VISIBLE NOT NULL,
  "ACTION" VARCHAR2(256 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of ACTION_TYPE
-- ----------------------------
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('3', 'comment', 'reacted', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('4', 'post', 'created', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('5', 'post', 'updated', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('6', 'post', 'reacted', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('7', 'blood post', 'created', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('8', 'blood post', 'updated', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('9', 'blood post', 'reacted', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('1', 'comment', 'created', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('2', 'comment', 'updated', TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-18 22:54:32', 'SYYYY-MM-DD HH24:MI:SS'), '1');
INSERT INTO "C##BMS_PROJECT"."ACTION_TYPE" VALUES ('21', 'message', 'received', TO_DATE('2022-02-21 14:07:40', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-21 14:07:40', 'SYYYY-MM-DD HH24:MI:SS'), '1');


-- ----------------------------
-- Table structure for ACTIVITY_OBJECT
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" (
  "ID" NUMBER VISIBLE NOT NULL,
  "ACTOR_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "ACTION_TYPE_ID" NUMBER VISIBLE NOT NULL,
  "ENTITY_ID" VARCHAR2(36 BYTE) VISIBLE,
  "SEEN_TIME" DATE VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for BLOOD_POST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."BLOOD_POST" (
  "POST_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "LOCATION_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "BLOOD_GROUP" VARCHAR2(3 BYTE) VISIBLE NOT NULL,
  "AMOUNT" NUMBER VISIBLE NOT NULL,
  "CONTACT" VARCHAR2(15 BYTE) VISIBLE NOT NULL,
  "ADDITIONAL_INFO" CLOB VISIBLE,
  "DUE_TIME" DATE VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for COMMENTS
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."COMMENTS" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "POST_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "TEXT" CLOB VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for COMMENT_REACT
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."COMMENT_REACT" (
  "COMMENT_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "REACT_NAME" VARCHAR2(10 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for DONATION
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."DONATION" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "LOCATION_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "ADDITIONAL_INFO" CLOB VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL,
  "DONATION_TIME" DATE VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for DONATION_POST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."DONATION_POST" (
  "DONATION_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "POST_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for EVENT
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."EVENT" (
  "ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "GROUP_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "LOCATION_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" CLOB VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for GROUP
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."GROUP" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "NAME" VARCHAR2(50 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" CLOB VISIBLE,
  "PRIVACY" NUMBER(1,0) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for GROUP_JOIN_REQUEST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "GROUP_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "APPROVEDATE" DATE VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for GROUP_MEMBER
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."GROUP_MEMBER" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "GROUP_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "APPROVEDATE" DATE VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for GROUP_POST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."GROUP_POST" (
  "POST_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "GROUP_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "TEXT" CLOB VISIBLE,
  "APPROVEDATE" DATE VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for LOCATION
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."LOCATION" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "LATITUDE" NUMBER VISIBLE NOT NULL,
  "LONGITUDE" NUMBER VISIBLE NOT NULL,
  "DESCRIPTION" VARCHAR2(4000 BYTE) VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for MENTION
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."MENTION" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "COMMENT_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for MESSAGE
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."MESSAGE" (
  "SENDER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "RECEIVER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "TEXT" CLOB VISIBLE,
  "SEEN_TIME" DATE VISIBLE,
  "SENT_TIME" DATE VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for NOTIFICATION
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."NOTIFICATION" (
  "RECEIVER_USER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "ACTIVITY_OBJECT_ID" NUMBER VISIBLE NOT NULL,
  "SEEN" DATE VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for POST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."POST" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" CLOB VISIBLE,
  "PRIVACY" NUMBER(1,0) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for POST_REACT
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."POST_REACT" (
  "POST_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "USER_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "REACT_NAME" VARCHAR2(10 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for SHARE_POST
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."SHARE_POST" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "POST_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for TAG
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."TAG" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "POST_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for USERS
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."USERS" (
  "ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "LOCATION_ID" VARCHAR2(36 BYTE) VISIBLE NOT NULL,
  "NAME" VARCHAR2(255 BYTE) VISIBLE NOT NULL,
  "EMAIL" VARCHAR2(320 BYTE) VISIBLE NOT NULL,
  "PASSWORD" VARCHAR2(144 BYTE) VISIBLE NOT NULL,
  "PHONE_NUMBER" VARCHAR2(15 BYTE) VISIBLE NOT NULL,
  "BLOOD_GROUP" VARCHAR2(3 BYTE) VISIBLE NOT NULL,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL,
  "GENDER" VARCHAR2(6 BYTE) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Table structure for USER_INFO
-- ----------------------------
CREATE TABLE "C##BMS_PROJECT"."USER_INFO" (
  "USER_ID" VARCHAR2(32 BYTE) VISIBLE NOT NULL,
  "IMAGE_URL" VARCHAR2(1024 BYTE) VISIBLE,
  "BIRTHDATE" DATE VISIBLE,
  "AVAILABLE" NUMBER(1,0) VISIBLE,
  "ADDITIONAL_INFO" CLOB VISIBLE,
  "SETTINGS" CLOB VISIBLE,
  "CREATED" DATE VISIBLE NOT NULL,
  "UPDATED" DATE VISIBLE NOT NULL,
  "ACTIVE" NUMBER(1,0) VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Function structure for DELETE_COMMENT
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "C##BMS_PROJECT"."DELETE_COMMENT"(comment_id in VARCHAR2, user_id_in in VARCHAR2, y OUT SYS_REFCURSOR)
is
	flag NUMBER;
begin
	SELECT 1 into flag from COMMENTS c join post p on (c.POST_ID = p.id)
		where (c.user_id = user_id_in or p.USER_ID = user_id_in ) and c.id = comment_id and c.active = 1 and p.ACTIVE = 1;
	update comments set active = 0 where id = comment_id and active = 1;
	open y for select 'comment deleted' "message" from dual;

EXCEPTION
	WHEN NO_DATA_FOUND THEN
		open y for select 'you are not authorized to delete the comment' "message" from dual;
	WHEN TOO_MANY_ROWS THEN
		open y for select 'server error' "message" from dual;
end;
/

-- ----------------------------
-- Function structure for DELETE_POST
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "C##BMS_PROJECT"."DELETE_POST" (post_id in VARCHAR2, user_id_in in VARCHAR2, y OUT SYS_REFCURSOR)
is
	flag NUMBER;
begin
	SELECT 1 into flag from post
		where user_id = user_id_in and id = post_id and active = 1;
	update post set active = 0 where id = post_id and active = 1;
	open y for select 'post deleted' "message" from dual;

EXCEPTION
	WHEN NO_DATA_FOUND THEN
		open y for select 'you are not authorized to delete the post' "message" from dual;
	WHEN TOO_MANY_ROWS THEN
		open y for select 'server error' "message" from dual;
end;
/

-- ----------------------------
-- Function structure for EMAIL_CHECK
-- ----------------------------
CREATE OR REPLACE
FUNCTION "C##BMS_PROJECT"."EMAIL_CHECK"(in_email in VARCHAR2)
return  number is
    flag number;
begin
	flag := 0;
	dbms_output.put_line(flag);
	select 1 into flag from users where EMAIL = in_email;
-- 	dbms_output.put_line(flag);
-- 	if flag = 1 then
-- 		return 1;
-- 	end if;
-- 	flag := -1;
-- 	dbms_output.put_line(flag);
	return flag;
end;
/

-- ----------------------------
-- Function structure for GET_ALL_NOTIFICATION
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "C##BMS_PROJECT"."GET_ALL_NOTIFICATION" (user_id_in in VARCHAR2, x OUT SYS_REFCURSOR)
is
begin

	open x for select

	u.id "actor_id",
	u.name "actor_name",
	a_t.ENTITY "type",
	n.ACTIVITY_OBJECT_ID "notification_id",
	ao.ENTITY_ID "entity_id",
	n.created "created",
	(
	case
		when a_t.ENTITY = 'blood post'
		then 'posted for ' || n.BLOOD_GROUP || ' blood'
		when a_t.ENTITY = 'comment'
		then 'commented on your post'
	end
	) "message"


	FROM
	(select n.created, n.ACTIVITY_OBJECT_ID, u.BLOOD_GROUP blood_group from NOTIFICATION n join users u on(u.id = n.RECEIVER_USER_ID) where n.SEEN is null and n.active = 1 and n.RECEIVER_USER_ID = user_id_in)
	n join ACTIVITY_OBJECT ao on (n.ACTIVITY_OBJECT_ID = ao.id)
	join ACTION_TYPE a_t on (ao.ACTION_TYPE_ID = a_t.id)
	join users u on (ao.ACTOR_ID = u.id)
	order by n.created desc
	;
end;
/

-- ----------------------------
-- Function structure for GET_USER
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "C##BMS_PROJECT"."GET_USER" (email_in in VARCHAR2, x OUT SYS_REFCURSOR)
is
begin
	open x for select * from "USERS" where "EMAIL" = email_in;
-- 	select 1 into flag from users where EMAIL = in_email;
-- 	dbms_output.put_line(flag);
-- 	if flag = 1 then
-- 		return 1;
-- 	end if;
-- 	flag := -1;
-- 	dbms_output.put_line(flag);
-- 	return flag;
end;
/
/

-- ----------------------------
-- Function structure for GET_USER_BY_NAME
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "C##BMS_PROJECT"."GET_USER_BY_NAME"(filter_name in VARCHAR2, x OUT SYS_REFCURSOR)
is
	filter VARCHAR2(100);
begin
	filter := '%' || LOWER(filter_name) || '%';
	open x for select id "id", name "name" from "USERS" where LOWER(name) like filter;
end;
/


-- ----------------------------
-- Sequence structure for ACTION_TYPE_ID_SEQ
-- ----------------------------
DROP SEQUENCE "C##BMS_PROJECT"."ACTION_TYPE_ID_SEQ";
CREATE SEQUENCE "C##BMS_PROJECT"."ACTION_TYPE_ID_SEQ" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ACTIVITY_OBJECT_ID_SEQ
-- ----------------------------
DROP SEQUENCE "C##BMS_PROJECT"."ACTIVITY_OBJECT_ID_SEQ";
CREATE SEQUENCE "C##BMS_PROJECT"."ACTIVITY_OBJECT_ID_SEQ" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Primary Key structure for table ACTION_TYPE
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "ACTION_TYPE_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table ACTION_TYPE
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009654" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009655" CHECK ("ENTITY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009656" CHECK ("ACTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009657" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009658" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTION_TYPE" ADD CONSTRAINT "SYS_C009659" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table ACTION_TYPE
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_ACTION_TYPE" BEFORE INSERT ON "C##BMS_PROJECT"."ACTION_TYPE" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_ACTION_TYPE" BEFORE UPDATE ON "C##BMS_PROJECT"."ACTION_TYPE" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table ACTIVITY_OBJECT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "ACTIVITY_OBJECT_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table ACTIVITY_OBJECT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009661" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009662" CHECK ("ACTOR_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009663" CHECK ("ACTION_TYPE_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009665" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009666" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "SYS_C009667" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table ACTIVITY_OBJECT
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_ACTIVITY_OBJECT" BEFORE INSERT ON "C##BMS_PROJECT"."ACTIVITY_OBJECT" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_ACTIVITY_OBJECT" BEFORE UPDATE ON "C##BMS_PROJECT"."ACTIVITY_OBJECT" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table BLOOD_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "BLOOD_POST_PK" PRIMARY KEY ("POST_ID", "LOCATION_ID");

-- ----------------------------
-- Checks structure for table BLOOD_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "BLOOD_POST_ADDITIONAL_INFO_JSON" CHECK (additional_info is json) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C007884" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C007885" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C007886" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C007887" CHECK ("AMOUNT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C007888" CHECK ("CONTACT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C008717" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C008718" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C008719" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C008720" CHECK ("AMOUNT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C008721" CHECK ("CONTACT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009280" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009281" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009282" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009283" CHECK ("AMOUNT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009284" CHECK ("CONTACT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "SYS_C009590" CHECK ("DUE_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table BLOOD_POST
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."NOTIFICATION_FOR_BLOOD" AFTER INSERT ON "C##BMS_PROJECT"."BLOOD_POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE
	a_t NUMBER;
	user_id VARCHAR2(36);
	act_obj_id NUMBER;
BEGIN
	select id into a_t
	from ACTION_TYPE where ENTITY = 'blood post' and action = 'created';
-- -- 	
	act_obj_id := ACTIVITY_OBJECT_ID_seq.nextval;
-- 	
	select user_id into user_id
	from post where id = :new.post_id;
-- 	
	insert into ACTIVITY_OBJECT (id, ACTOR_ID, ACTION_TYPE_ID, ENTITY_ID) VALUES (act_obj_id, user_id, a_t,:new.post_id);
-- 	
	for u in 
	(
		SELECT id from users where BLOOD_GROUP = :new.BLOOD_GROUP
	)
	LOOP	
		INSERT into NOTIFICATION ( RECEIVER_USER_ID, ACTIVITY_OBJECT_ID) VALUES (u.id, act_obj_id);
	END LOOP;
	
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."NOTIFICATION_FOR_BLOOD_AFTER_UPDATE" BEFORE UPDATE OF "BLOOD_GROUP" ON "C##BMS_PROJECT"."BLOOD_POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE
	a_t NUMBER;
	user_id VARCHAR2(36);
	act_obj_id NUMBER;
	old_bg VARCHAR2(5);
	new_bg VARCHAR2(5);
BEGIN
	
	select id into a_t
	from ACTION_TYPE where ENTITY = 'blood post' and action = 'created';
-- -- 	
	act_obj_id := ACTIVITY_OBJECT_ID_seq.nextval;
-- 	
	select user_id into user_id
	from post where id = :new.post_id;
-- 	
	select id into act_obj_id from ACTIVITY_OBJECT where ACTOR_ID = user_id and ACTION_TYPE_ID = a_t and ENTITY_ID = :new.post_id;
-- 	insert into ACTIVITY_OBJECT (id, ACTOR_ID, ACTION_TYPE_ID, ENTITY_ID) VALUES (act_obj_id, user_id, a_t,:new.post_id);
	
-- 	
	DELETE from NOTIFICATION where ACTIVITY_OBJECT_ID in (SELECT ACTIVITY_OBJECT_ID from NOTIFICATION where ACTIVITY_OBJECT_ID = act_obj_id);

	for u in 
	(
		SELECT id from users where BLOOD_GROUP = :new.BLOOD_GROUP
	)
	LOOP	
		INSERT into NOTIFICATION ( RECEIVER_USER_ID, ACTIVITY_OBJECT_ID) VALUES (u.id, act_obj_id);
	END LOOP;
	
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_BLOOD_POST" AFTER UPDATE ON "C##BMS_PROJECT"."BLOOD_POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	post_id VARCHAR2(36);
	
BEGIN
	post_id := :new.post_id;
	UPDATE post set UPDATED = SYSDATE() where id = post_id;
END;
/

-- ----------------------------
-- Primary Key structure for table COMMENTS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "COMMENTS_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table COMMENTS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007898" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007899" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007900" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007942" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007943" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007944" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007945" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007946" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C007947" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008888" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008889" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008890" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008891" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008892" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "SYS_C008893" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table COMMENTS
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_COMMENTS" BEFORE INSERT ON "C##BMS_PROJECT"."COMMENTS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."COMMENT_NOTIFICATION" AFTER INSERT ON "C##BMS_PROJECT"."COMMENTS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	post_id VARCHAR2(36);
	user_id VARCHAR2(36);
	act_type NUMBER;
	act_obj_id NUMBER;
BEGIN
	post_id := :new.POST_ID;
	select post.USER_ID into user_id from post where id = post_id;
	select id into act_type from ACTION_TYPE where entity = 'comment' and action = 'created';
	act_obj_id := ACTIVITY_OBJECT_ID_seq.nextval;
	INSERT into ACTIVITY_OBJECT (id, ACTOR_ID, ACTION_TYPE_ID, ENTITY_ID) values (act_obj_id, :new.USER_ID, act_type, :new.ID);
	INSERT into NOTIFICATION (RECEIVER_USER_ID, ACTIVITY_OBJECT_ID) VALUES (user_id, act_obj_id);
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."DELETE_COMMENT" AFTER UPDATE OF "ACTIVE" ON "C##BMS_PROJECT"."COMMENTS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW WHEN (new.active = 0) 
DECLARE
	
begin 
	for r in (
		select id from ACTIVITY_OBJECT where ENTITY_ID = :new.id
	)
	LOOP
		dbms_output.put_line(r.id);
		update NOTIFICATION set active = 0 where ACTIVITY_OBJECT_ID = r.id;
		update ACTIVITY_OBJECT set active = 0 where id = r.id;
-- 		IF  THEN
-- 			EXIT; 
-- 		END IF; 
	END LOOP;

end;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."SET_COMMENT" AFTER UPDATE OF "ACTIVE" ON "C##BMS_PROJECT"."COMMENTS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW WHEN (new.active = 1) 
DECLARE
	
begin 
	for r in (
		select id from ACTIVITY_OBJECT where ENTITY_ID = :new.id and active = 1
	)
	LOOP
		update NOTIFICATION set active = 1 where ACTIVITY_OBJECT_ID = r.id;
		update ACTIVITY_OBJECT set active = 1 where id = r.id;
-- 		IF  THEN
-- 			EXIT; 
-- 		END IF; 
	END LOOP;

end;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_COMMENTS" BEFORE UPDATE ON "C##BMS_PROJECT"."COMMENTS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table COMMENT_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "COMMENT_REACT_PK" PRIMARY KEY ("COMMENT_ID", "USER_ID");

-- ----------------------------
-- Checks structure for table COMMENT_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C007910" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C007911" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C007912" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008022" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008725" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008726" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008727" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008728" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008729" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C008730" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009285" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009286" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009287" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009288" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009289" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "SYS_C009290" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table DONATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "DONATION_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table DONATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "DONATION_ADDITIONAL_INFO_JSON" CHECK (additional_info is json) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007858" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007859" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007860" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007954" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007955" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007956" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007957" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007958" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C007959" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008011" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008012" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008013" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008900" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008901" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008902" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008903" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008904" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C008905" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "SYS_C009709" CHECK ("DONATION_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table DONATION
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_DONATION" BEFORE INSERT ON "C##BMS_PROJECT"."DONATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_DONATION" BEFORE UPDATE ON "C##BMS_PROJECT"."DONATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table DONATION_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "DONATION_POST_PK" PRIMARY KEY ("DONATION_ID");

-- ----------------------------
-- Uniques structure for table DONATION_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "SYS_C009723" UNIQUE ("POST_ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table DONATION_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "SYS_C009718" CHECK ("DONATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "SYS_C009719" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table EVENT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "EVENT_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table EVENT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "EVENT_DESCRIPTION_JSON" CHECK (description is json) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C007960" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C007961" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C007962" CHECK ("DESCRIPTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008008" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008009" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008010" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008736" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008737" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008738" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008739" CHECK ("DESCRIPTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008740" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008741" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C008742" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009293" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009294" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009295" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009296" CHECK ("DESCRIPTION" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009297" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009298" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "SYS_C009299" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table GROUP
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "GROUP_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table GROUP
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "GROUP_DESCRIPTION_JSON" CHECK (description is json) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007939" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007940" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007941" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007972" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007973" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007974" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007975" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007976" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C007977" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008915" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008916" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008917" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008918" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008919" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP" ADD CONSTRAINT "SYS_C008920" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table GROUP_JOIN_REQUEST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "GROUP_JOIN_REQUEST_PK" PRIMARY KEY ("USER_ID", "GROUP_ID");

-- ----------------------------
-- Checks structure for table GROUP_JOIN_REQUEST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008005" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008006" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008007" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008743" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008744" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008745" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008746" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C008747" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C009300" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C009301" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C009302" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C009303" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "SYS_C009304" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table GROUP_MEMBER
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "GROUP_MEMBER_PK" PRIMARY KEY ("USER_ID", "GROUP_ID");

-- ----------------------------
-- Checks structure for table GROUP_MEMBER
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C007949" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C007950" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008002" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008003" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008004" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008748" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008749" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008750" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008751" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C008752" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C009305" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C009306" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C009307" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C009308" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "SYS_C009309" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table GROUP_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "GROUP_POST_PK" PRIMARY KEY ("POST_ID", "GROUP_ID");

-- ----------------------------
-- Checks structure for table GROUP_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C007999" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008000" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008001" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008753" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008754" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008755" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008756" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C008757" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C009310" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C009311" CHECK ("GROUP_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C009312" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C009313" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "SYS_C009314" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table LOCATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "LOCATION_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table LOCATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007838" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007839" CHECK ("LATITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007840" CHECK ("LONGITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007993" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007994" CHECK ("LATITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007995" CHECK ("LONGITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007996" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007997" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C007998" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008936" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008937" CHECK ("LATITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008938" CHECK ("LONGITUDE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008939" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008940" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."LOCATION" ADD CONSTRAINT "SYS_C008941" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table LOCATION
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_LOCATION" BEFORE INSERT ON "C##BMS_PROJECT"."LOCATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_LOCATION" BEFORE UPDATE ON "C##BMS_PROJECT"."LOCATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table MENTION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "MENTION_PK" PRIMARY KEY ("USER_ID", "COMMENT_ID");

-- ----------------------------
-- Checks structure for table MENTION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C007918" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C007919" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C008758" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C008759" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C008760" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C008761" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C008762" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C009315" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C009316" CHECK ("COMMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C009317" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C009318" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "SYS_C009319" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table MESSAGE
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C007990" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C007991" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C007992" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008763" CHECK ("SENDER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008764" CHECK ("RECEIVER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008765" CHECK ("SENT_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008766" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008767" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C008768" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009320" CHECK ("SENDER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009321" CHECK ("RECEIVER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009322" CHECK ("SENT_TIME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009323" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009324" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "SYS_C009325" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table MESSAGE
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_MESSAGE" BEFORE INSERT ON "C##BMS_PROJECT"."MESSAGE" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."MESAGE_NOTIFICATION" AFTER INSERT ON "C##BMS_PROJECT"."MESSAGE" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE
	a_t NUMBER;
	user_id VARCHAR2(36);
	act_obj_id NUMBER;
BEGIN
	select id into a_t
	from ACTION_TYPE where ENTITY = 'message' and action = 'received';
-- -- 	
	act_obj_id := ACTIVITY_OBJECT_ID_seq.nextval;
-- 	
-- 	select user_id into user_id
-- 	from post where id = :new.post_id;
-- 	
	insert into ACTIVITY_OBJECT (id, ACTOR_ID, ACTION_TYPE_ID, ENTITY_ID) VALUES (act_obj_id, :new.SENDER_ID, a_t, :new.SENDER_ID);
-- 	
	INSERT into NOTIFICATION ( RECEIVER_USER_ID, ACTIVITY_OBJECT_ID) VALUES (:new.RECEIVER_ID, act_obj_id);
	
END;
/

-- ----------------------------
-- Primary Key structure for table NOTIFICATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "NOTIFICATION_PK" PRIMARY KEY ("RECEIVER_USER_ID", "ACTIVITY_OBJECT_ID");

-- ----------------------------
-- Checks structure for table NOTIFICATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "SYS_C009685" CHECK ("RECEIVER_USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "SYS_C009686" CHECK ("ACTIVITY_OBJECT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "SYS_C009687" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "SYS_C009688" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "SYS_C009689" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table NOTIFICATION
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_NOTIFICATION" BEFORE INSERT ON "C##BMS_PROJECT"."NOTIFICATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_NOTIFICATION" BEFORE UPDATE ON "C##BMS_PROJECT"."NOTIFICATION" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "POST_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "POST_DESCRIPTION_JSON" CHECK (description is json) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007865" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007866" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007867" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007868" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007869" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C007870" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008016" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008017" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008018" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008019" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008020" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008021" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008959" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008960" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008961" CHECK ("PRIVACY" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008962" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008963" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "SYS_C008964" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table POST
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_POST" BEFORE INSERT ON "C##BMS_PROJECT"."POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."DELETING_POST" AFTER UPDATE OF "ACTIVE" ON "C##BMS_PROJECT"."POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW WHEN (new.active = 0) 
DECLARE
	
begin 
	for r in (
	select id from ACTIVITY_OBJECT where ENTITY_ID = :new.id
	)
	LOOP
		update NOTIFICATION set active = 0 where ACTIVITY_OBJECT_ID = r.id;
		update ACTIVITY_OBJECT set active = 0 where id = r.id;
-- 		IF  THEN
-- 			EXIT; 
-- 		END IF; 
	END LOOP;

end;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."SET_POST" AFTER UPDATE OF "ACTIVE" ON "C##BMS_PROJECT"."POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW WHEN (new.active = 1) 
DECLARE
	
begin 
	for r in (
	select id from ACTIVITY_OBJECT where ENTITY_ID = :new.id
	)
	LOOP
		update NOTIFICATION set active = 1 where ACTIVITY_OBJECT_ID = r.id;
		update ACTIVITY_OBJECT set active = 1 where id = r.id;
-- 		IF  THEN
-- 			EXIT; 
-- 		END IF; 
	END LOOP;

end;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_POST" BEFORE UPDATE ON "C##BMS_PROJECT"."POST" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table POST_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "POST_REACT_PK" PRIMARY KEY ("POST_ID", "USER_ID");

-- ----------------------------
-- Checks structure for table POST_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007904" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007905" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007906" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007987" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007988" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C007989" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008775" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008776" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008777" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008778" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008779" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C008780" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009332" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009333" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009334" CHECK ("REACT_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009335" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009336" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "SYS_C009337" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table POST_REACT
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_POST_REACT" BEFORE INSERT ON "C##BMS_PROJECT"."POST_REACT" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_POST_REACT" BEFORE UPDATE ON "C##BMS_PROJECT"."POST_REACT" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Primary Key structure for table SHARE_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SHARE_PK" PRIMARY KEY ("USER_ID", "POST_ID");

-- ----------------------------
-- Checks structure for table SHARE_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C007879" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C007880" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C007984" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C007985" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C007986" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C008781" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C008782" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C008783" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C008784" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C008785" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C009338" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C009339" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C009340" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C009341" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SYS_C009342" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table TAG
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "TAG_PK" PRIMARY KEY ("USER_ID", "POST_ID");

-- ----------------------------
-- Checks structure for table TAG
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C007874" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C007875" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C007981" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C007982" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C007983" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C008786" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C008787" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C008788" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C008789" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C008790" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C009343" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C009344" CHECK ("POST_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C009345" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C009346" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "SYS_C009347" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table USERS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "USER_PK" PRIMARY KEY ("ID");

-- ----------------------------
-- Checks structure for table USERS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007842" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007843" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007844" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007845" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007846" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007847" CHECK ("PHONE_NUMBER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007848" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007849" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007850" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C007851" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008026" CHECK ("GENDER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008038" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008039" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008040" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008041" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008042" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008043" CHECK ("PHONE_NUMBER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008044" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008045" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008046" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008047" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008048" CHECK ("GENDER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008981" CHECK ("ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008982" CHECK ("LOCATION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008983" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008984" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008985" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008986" CHECK ("PHONE_NUMBER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008987" CHECK ("BLOOD_GROUP" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008988" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008989" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008990" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "SYS_C008991" CHECK ("GENDER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table USERS
-- ----------------------------
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."BEFORE_INSERT_IN_USERS" BEFORE INSERT ON "C##BMS_PROJECT"."USERS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.created := SYSDATE();
	:new.updated := sysdate();
	:new.active := 1;
END;
/
CREATE OR REPLACE TRIGGER "C##BMS_PROJECT"."UPDATING_USERS" BEFORE UPDATE ON "C##BMS_PROJECT"."USERS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
declare
	
BEGIN
	:new.updated := sysdate();
END;
/

-- ----------------------------
-- Checks structure for table USER_INFO
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C007854" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C007978" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C007979" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C007980" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C008791" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C008792" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C008793" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C008794" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C009348" CHECK ("USER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C009349" CHECK ("CREATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C009350" CHECK ("UPDATED" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "SYS_C009351" CHECK ("ACTIVE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "USER_INFO_ADDITIONAL_INFO_JSON" CHECK (additional_info IS JSON) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "USER_INFO_SETTINGS_JSON" CHECK (settings IS JSON) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table ACTIVITY_OBJECT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "ACTIVITY_OBJECT_ACTION_TYPE_FK" FOREIGN KEY ("ACTION_TYPE_ID") REFERENCES "C##BMS_PROJECT"."ACTION_TYPE" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."ACTIVITY_OBJECT" ADD CONSTRAINT "ACTIVITY_OBJECT_USERS_FK" FOREIGN KEY ("ACTOR_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table BLOOD_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "BLOOD_POST_LOCATION_FK" FOREIGN KEY ("LOCATION_ID") REFERENCES "C##BMS_PROJECT"."LOCATION" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."BLOOD_POST" ADD CONSTRAINT "BLOOD_POST_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table COMMENTS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "COMMENTS_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENTS" ADD CONSTRAINT "COMMENTS_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table COMMENT_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "COMMENT_REACT_COMMENT_FK" FOREIGN KEY ("COMMENT_ID") REFERENCES "C##BMS_PROJECT"."COMMENTS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."COMMENT_REACT" ADD CONSTRAINT "COMMENT_REACT_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table DONATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "DONATION_LOCATION_FK" FOREIGN KEY ("LOCATION_ID") REFERENCES "C##BMS_PROJECT"."LOCATION" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION" ADD CONSTRAINT "DONATION_USER_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table DONATION_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "DONATION_POST_DONATION_FK" FOREIGN KEY ("DONATION_ID") REFERENCES "C##BMS_PROJECT"."DONATION" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."DONATION_POST" ADD CONSTRAINT "DONATION_POST_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table EVENT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "EVENT_GROUP_FK" FOREIGN KEY ("GROUP_ID") REFERENCES "C##BMS_PROJECT"."GROUP" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."EVENT" ADD CONSTRAINT "EVENT_LOCATION_FK" FOREIGN KEY ("LOCATION_ID") REFERENCES "C##BMS_PROJECT"."LOCATION" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table GROUP_JOIN_REQUEST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "GROUP_JOIN_REQUEST_GROUP_FK" FOREIGN KEY ("GROUP_ID") REFERENCES "C##BMS_PROJECT"."GROUP" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_JOIN_REQUEST" ADD CONSTRAINT "GROUP_JOIN_REQUEST_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table GROUP_MEMBER
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "GROUP_MEMBER_GROUP_FK" FOREIGN KEY ("GROUP_ID") REFERENCES "C##BMS_PROJECT"."GROUP" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_MEMBER" ADD CONSTRAINT "GROUP_MEMBER_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table GROUP_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "GROUP_POST_GROUP_FK" FOREIGN KEY ("GROUP_ID") REFERENCES "C##BMS_PROJECT"."GROUP" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."GROUP_POST" ADD CONSTRAINT "GROUP_POST_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table MENTION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "MENTION_COMMENT_FK" FOREIGN KEY ("COMMENT_ID") REFERENCES "C##BMS_PROJECT"."COMMENTS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MENTION" ADD CONSTRAINT "MENTION_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table MESSAGE
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "MESSAGERECEIVER_USERS_FK" FOREIGN KEY ("RECEIVER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."MESSAGE" ADD CONSTRAINT "MESSAGESENDER_USERS_FK" FOREIGN KEY ("SENDER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table NOTIFICATION
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "NOTIFICATION_ACTIVITY_OBJECT_FK" FOREIGN KEY ("ACTIVITY_OBJECT_ID") REFERENCES "C##BMS_PROJECT"."ACTIVITY_OBJECT" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."NOTIFICATION" ADD CONSTRAINT "NOTIFICATION_USERS_FK" FOREIGN KEY ("RECEIVER_USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST" ADD CONSTRAINT "POST_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table POST_REACT
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "POST_REACT_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."POST_REACT" ADD CONSTRAINT "POST_REACT_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table SHARE_POST
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SHARE_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."SHARE_POST" ADD CONSTRAINT "SHARE_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table TAG
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "TAG_POST_FK" FOREIGN KEY ("POST_ID") REFERENCES "C##BMS_PROJECT"."POST" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "C##BMS_PROJECT"."TAG" ADD CONSTRAINT "TAG_USERS_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table USERS
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."USERS" ADD CONSTRAINT "USER_LOCATION_FK" FOREIGN KEY ("LOCATION_ID") REFERENCES "C##BMS_PROJECT"."LOCATION" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table USER_INFO
-- ----------------------------
ALTER TABLE "C##BMS_PROJECT"."USER_INFO" ADD CONSTRAINT "USERS_USER_INFO_FK" FOREIGN KEY ("USER_ID") REFERENCES "C##BMS_PROJECT"."USERS" ("ID") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

COMMIT;